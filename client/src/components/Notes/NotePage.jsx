import { useEffect, useRef, useState } from "react";
import { useModalContext } from "../../hooks/useModalContext";
const NotePage = ({noteSettings, saveSelection}) => {
  const { fireClick, closeContextMenu } = useModalContext()
  const notePage = useRef();
  const [note, setNote] = useState(["note"])
  let author = "Gideon_Babalola";
  let title = "Software Development";
 let content = "Investors often face challenges in making informed decisions, primarily due to inadequate research or insufficient information. They struggle to identify the necessary information and where to find itInvestors often face challenges in making informed decisions, primarily due to inadequate research or insufficient information. They struggle to identify the necessary information and where to find itInvestors often face challenges in making informed decisions, primarily due to inadequate research or insufficient information. They struggle to identify the necessary information and where to find itInvestors often face challenges in making informed decisions, primarily due to inadequate research or insufficient information. They struggle to identify the necessary information and where to find itInvestors often face challenges in making informed decisions, primarily due to inadequate research or insufficient information. They struggle to identify the necessary information and where to find itInvestors often face challenges in making informed decisions, primarily due to inadequate research or insufficient information. They struggle to identify the necessary information and where to find itInvestors often face challenges in making informed decisions, primarily due to inadequate research or insufficient information. They struggle to identify the necessary information and where to find itInvestors often face challenges in making informed decisions, primarily due to inadequate research or insufficient information. They struggle to identify the necessary information and where to find itInvestors often face challenges in making informed decisions, primarily due to inadequate research or insufficient information. They struggle to identify the necessary information and where to find itInvestors often face challenges in making informed decisions, primarily due to inadequate research or insufficient information. They struggle to identify the necessary information and where to find itInvestors often face challenges in making informed decisions, primarily due to inadequate research or insufficient information. They struggle to identify the necessary information and where to find itInvestors often face challenges in making informed decisions, primarily due to inadequate research or insufficient information. They struggle to identify the necessary information and where to find itInvestors often face challenges in making informed decisions, primarily due to inadequate research or insufficient information. They struggle to identify the necessary information and where to find itInvestors often face challenges in making informed decisions, primarily due to inadequate research or insufficient information. They struggle to identify the necessary information and where to find itInvestors often face challenges in making informed decisions, primarily due to inadequate research or insufficient information. They struggle to identify the necessary information and where to find itInvestors often face challenges in making informed decisions, primarily due to inadequate research or insufficient information. They struggle to identify the necessary information and where to find itInvestors often face challenges in making informed decisions, primarily due to inadequate research or insufficient information. They struggle to identify the necessary information and where to find itInvestors often face challenges in making informed decisions, primarily due to inadequate research or insufficient information. They struggle to identify the necessary information and where to find itInvestors often face challenges in making informed decisions, primarily due to inadequate research or insufficient information. They struggle to identify the necessary information and where to find itInvestors often face challenges in making informed decisions, primarily due to inadequate research or insufficient information. They struggle to identify the necessary information and where to find itInvestors often face challenges in making informed decisions, primarily due to inadequate research or insufficient information. They struggle to identify the necessary information and where to find itInvestors often face challenges in making informed decisions, primarily due to inadequate research or insufficient information. They struggle to identify the necessary information and where to find itInvestors often face challenges in making informed decisions, primarily due to inadequate research or insufficient information. They struggle to identify the necessary information and where to find itInvestors often face challenges in making informed decisions, primarily due to inadequate research or insufficient information. They struggle to identify the necessary information and where to find itInvestors often face challenges in making informed decisions, primarily due to inadequate research or insufficient information. They struggle to identify the necessary information and where to find itInvestors often face challenges in making informed decisions, primarily due to inadequate research or insufficient information. They struggle to identify the necessary information and where to find itInvestors often face challenges in making informed decisions, primarily due to inadequate research or insufficient information. They struggle to identify the necessary information and where to find itInvestors often face challenges in making informed decisions, primarily due to inadequate research or insufficient information. They struggle to identify the necessary information and where to find itInvestors often face challenges in making informed decisions, primarily due to inadequate research or insufficient information. They struggle to identify the necessary information and where to find itInvestors often face challenges in making informed decisions, primarily due to inadequate research or insufficient information. They struggle to identify the necessary information and where to find itInvestors often face challenges in making informed decisions, primarily due to inadequate research or insufficient information. They struggle to identify the necessary information and where to find itInvestors often face challenges in making informed decisions, primarily due to inadequate research or insufficient information. They struggle to identify the necessary information and where to find itInvestors often face challenges in making informed decisions, primarily due to inadequate research or insufficient information. They struggle to identify the necessary information and where to find itInvestors often face challenges in making informed decisions, primarily due to inadequate research or insufficient information. They struggle to identify the necessary information and where to find itInvestors often face challenges in making informed decisions, primarily due to inadequate research or insufficient information. They struggle to identify the necessary information and where to find itInvestors often face challenges in making informed decisions, primarily due to inadequate research or insufficient information. They struggle to identify the necessary information and where to find itInvestors often face challenges in making informed decisions, primarily due to inadequate research or insufficient information. They struggle to identify the necessary information and where to find itInvestors often face challenges in making informed decisions, primarily due to inadequate research or insufficient information. They struggle to identify the necessary information and where to find itInvestors often face challenges in making informed decisions, primarily due to inadequate research or insufficient information. They struggle to identify the necessary information and where to find itInvestors often face challenges in making informed decisions, primarily due to inadequate research or insufficient information. They struggle to identify the necessary information and where to find itInvestors often face challenges in making informed decisions, primarily due to inadequate research or insufficient information. They struggle to identify the necessary information and where to find itInvestors often face challenges in making informed decisions, primarily due to inadequate research or insufficient information. They struggle to identify the necessary information and where to find itInvestors often face challenges in making informed decisions, primarily due to inadequate research or insufficient information. They struggle to identify the necessary information and where to find itInvestors often face challenges in making informed decisions, primarily due to inadequate research or insufficient information. They struggle to identify the necessary information and where to find itInvestors often face challenges in making informed decisions, primarily due to inadequate research or insufficient information. They struggle to identify the necessary information and where to find itInvestors often face challenges in making informed decisions, primarily due to inadequate research or insufficient information. They struggle to identify the necessary information and where to find itInvestors often face challenges in making informed decisions, primarily due to inadequate research or insufficient information. They struggle to identify the necessary information and where to find itInvestors often face challenges in making informed decisions, primarily due to inadequate research or insufficient information. They struggle to identify the necessary information and where to find itInvestors often face challenges in making informed decisions, primarily due to inadequate research or insufficient information. They struggle to identify the necessary information and where to find itInvestors often face challenges in making informed decisions, primarily due to inadequate research or insufficient information. They struggle to identify the necessary information and where to find itInvestors often face challenges in making informed decisions, primarily due to inadequate research or insufficient information. They struggle to identify the necessary information and where to find itInvestors often face challenges in making informed decisions, primarily due to inadequate research or insufficient information. They struggle to identify the necessary information and where to find itInvestors often face challenges in making informed decisions, primarily due to inadequate research or insufficient information. They struggle to identify the necessary information and where to find itInvestors often face challenges in making informed decisions, primarily due to inadequate research or insufficient information. They struggle to identify the necessary information and where to find itInvestors often face challenges in making informed decisions, primarily due to inadequate research or insufficient information. They struggle to identify the necessary information and where to find itInvestors often face challenges in making informed decisions, primarily due to inadequate research or insufficient information. They struggle to identify the necessary information and where to find itInvestors often face challenges in making informed decisions, primarily due to inadequate research or insufficient information. They struggle to identify the necessary information and where to find itInvestors often face challenges in making informed decisions, primarily due to inadequate research or insufficient information. They struggle to identify the necessary information and where to find itInvestors often face challenges in making informed decisions, primarily due to inadequate research or insufficient information. They struggle to identify the necessary information and where to find itInvestors often face challenges in making informed decisions, primarily due to inadequate research or insufficient information. They struggle to identify the necessary information and where to find itInvestors often face challenges in making informed decisions, primarily due to inadequate research or insufficient information. They struggle to identify the necessary information and where to find itInvestors often face challenges in making informed decisions, primarily due to inadequate research or insufficient information. They struggle to identify the necessary information and where to find itInvestors often face challenges in making informed decisions, primarily due to inadequate research or insufficient information. They struggle to identify the necessary information and where to find itInvestors often face challenges in making informed decisions, primarily due to inadequate research or insufficient information. They struggle to identify the necessary information and where to find itInvestors often face challenges in making informed decisions, primarily due to inadequate research or insufficient information. They struggle to identify the necessary information and where to find itInvestors often face challenges in making informed decisions, primarily due to inadequate research or insufficient information. They struggle to identify the necessary information and where to find itInvestors often face challenges in making informed decisions, primarily due to inadequate research or insufficient information. They struggle to identify the necessary information and where to find itInvestors often face challenges in making informed decisions, primarily due to inadequate research or insufficient information. They struggle to identify the necessary information and where to find itInvestors often face challenges in making informed decisions, primarily due to inadequate research or insufficient information. They struggle to identify the necessary information and where to find itInvestors often face challenges in making informed decisions, primarily due to inadequate research or insufficient information. They struggle to identify the necessary information and where to find itInvestors often face challenges in making informed decisions, primarily due to inadequate research or insufficient information. They struggle to identify the necessary information and where to find itInvestors often face challenges in making informed decisions, primarily due to inadequate research or insufficient information. They struggle to identify the necessary information and where to find itInvestors often face challenges in making informed decisions, primarily due to inadequate research or insufficient information. They struggle to identify the necessary information and where to find itInvestors often face challenges in making informed decisions, primarily due to inadequate research or insufficient information. They struggle to identify the necessary information and where to find itInvestors often face challenges in making informed decisions, primarily due to inadequate research or insufficient information. They struggle to identify the necessary information and where to find itInvestors often face challenges in making informed decisions, primarily due to inadequate research or insufficient information. They struggle to identify the necessary information and where to find itInvestors often face challenges in making informed decisions, primarily due to inadequate research or insufficient information. They struggle to identify the necessary information and where to find itInvestors often face challenges in making informed decisions, primarily due to inadequate research or insufficient information. They struggle to identify the necessary information and where to find itInvestors often face challenges in making informed decisions, primarily due to inadequate research or insufficient information. They struggle to identify the necessary information and where to find itInvestors often face challenges in making informed decisions, primarily due to inadequate research or insufficient information. They struggle to identify the necessary information and where to find itInvestors often face challenges in making informed decisions, primarily due to inadequate research or insufficient information. They struggle to identify the necessary information and where to find itInvestors often face challenges in making informed decisions, primarily due to inadequate research or insufficient information. They struggle to identify the necessary information and where to find itInvestors often face challenges in making informed decisions, primarily due to inadequate research or insufficient information. They struggle to identify the necessary information and where to find itInvestors often face challenges in making informed decisions, primarily due to inadequate research or insufficient information. They struggle to identify the necessary information and where to find itInvestors often face challenges in making informed decisions, primarily due to inadequate research or insufficient information. They struggle to identify the necessary information and where to find itInvestors often face challenges in making informed decisions, primarily due to inadequate research or insufficient information. They struggle to identify the necessary information and where to find itInvestors often face challenges in making informed decisions, primarily due to inadequate research or insufficient information. They struggle to identify the necessary information and where to find itInvestors often face challenges in making informed decisions, primarily due to inadequate research or insufficient information. They struggle to identify the necessary information and where to find itInvestors often face challenges in making informed decisions, primarily due to inadequate research or insufficient information. They struggle to identify the necessary information and where to find itInvestors often face challenges in making informed decisions, primarily due to inadequate research or insufficient information. They struggle to identify the necessary information and where to find itInvestors often face challenges in making informed decisions, primarily due to inadequate research or insufficient information. They struggle to identify the necessary information and where to find itInvestors often face challenges in making informed decisions, primarily due to inadequate research or insufficient information. They struggle to identify the necessary information and where to find itInvestors often face challenges in making informed decisions, primarily due to inadequate research or insufficient information. They struggle to identify the necessary information and where to find itInvestors often face challenges in making informed decisions, primarily due to inadequate research or insufficient information. They struggle to identify the necessary information and where to find itInvestors often face challenges in making informed decisions, primarily due to inadequate research or insufficient information. They struggle to identify the necessary information and where to find itInvestors often face challenges in making informed decisions, primarily due to inadequate research or insufficient information. They struggle to identify the necessary information and where to find itInvestors often face challenges in making informed decisions, primarily due to inadequate research or insufficient information. They struggle to identify the necessary information and where to find itInvestors often face challenges in making informed decisions, primarily due to inadequate research or insufficient information. They struggle to identify the necessary information and where to find itInvestors often face challenges in making informed decisions, primarily due to inadequate research or insufficient information. They struggle to identify the necessary information and where to find itInvestors often face challenges in making informed decisions, primarily due to inadequate research or insufficient information. They struggle to identify the necessary information and where to find itInvestors often face challenges in making informed decisions, primarily due to inadequate research or insufficient information. They struggle to identify the necessary information and where to find itInvestors often face challenges in making informed decisions, primarily due to inadequate research or insufficient information. They struggle to identify the necessary information and where to find itInvestors often face challenges in making informed decisions, primarily due to inadequate research or insufficient information. They struggle to identify the necessary information and where to find itInvestors often face challenges in making informed decisions, primarily due to inadequate research or insufficient information. They struggle to identify the necessary information and where to find itInvestors often face challenges in making informed decisions, primarily due to inadequate research or insufficient information. They struggle to identify the necessary information and where to find itInvestors often face challenges in making informed decisions, primarily due to inadequate research or insufficient information. They struggle to identify the necessary information and where to find itInvestors often face challenges in making informed decisions, primarily due to inadequate research or insufficient information. They struggle to identify the necessary information and where to find itInvestors often face challenges in making informed decisions, primarily due to inadequate research or insufficient information. They struggle to identify the necessary information and where to find itInvestors often face challenges in making informed decisions, primarily due to inadequate research or insufficient information. They struggle to identify the necessary information and where to find itInvestors often face challenges in making informed decisions, primarily due to inadequate research or insufficient information. They struggle to identify the necessary information and where to find itInvestors often face challenges in making informed decisions, primarily due to inadequate research or insufficient information. They struggle to identify the necessary information and where to find itInvestors often face challenges in making informed decisions, primarily due to inadequate research or insufficient information. They struggle to identify the necessary information and where to find itInvestors often face challenges in making informed decisions, primarily due to inadequate research or insufficient information. They struggle to identify the necessary information and where to find itInvestors often face challenges in making informed decisions, primarily due to inadequate research or insufficient information. They struggle to identify the necessary information and where to find itInvestors often face challenges in making informed decisions, primarily due to inadequate research or insufficient information. They struggle to identify the necessary information and where to find itInvestors often face challenges in making informed decisions, primarily due to inadequate research or insufficient information. They struggle to identify the necessary information and where to find itInvestors often face challenges in making informed decisions, primarily due to inadequate research or insufficient information. They struggle to identify the necessary information and where to find itInvestors often face challenges in making informed decisions, primarily due to inadequate research or insufficient information. They struggle to identify the necessary information and where to find itInvestors often face challenges in making informed decisions, primarily due to inadequate research or insufficient information. They struggle to identify the necessary information and where to find itInvestors often face challenges in making informed decisions, primarily due to inadequate research or insufficient information. They struggle to identify the necessary information and where to find itInvestors often face challenges in making informed decisions, primarily due to inadequate research or insufficient information. They struggle to identify the necessary information and where to find itInvestors often face challenges in making informed decisions, primarily due to inadequate research or insufficient information. They struggle to identify the necessary information and where to find it"
  useEffect(() => {
    const load = content.match(/.{1,1200}/g)
    const rope = load.map((load, index) => {
      return { id : index + 1, note : load}
    })
    setNote(rope)
    setTimeout(() => {
      notePage.current.classList.add("active");
    }, 500);
  }, [content]);
  useEffect(() => {
notePage.current.classList.remove("active")
setTimeout(() => {
  notePage.current.classList.add("active")  
}, 1);
  }, [noteSettings["page"]])
  const handleNoteInput = (e, id) => {
    const updatedNotes = note.map((n) =>
      n.id === id ? { ...n, note: e.target.innerText } : n
    );
    setNote(updatedNotes);
  }
  return (
    <>
      <section className="note-page-css-container" ref={notePage}  onClick={closeContextMenu}>
    
    {note.slice(0 + (noteSettings["page"] - 1 ) * 2,
      2 + (noteSettings["page"] - 1 )   * 2)
      .map((content) => (
      <div className="note-page-css" key={content["id"]}
      style={{
        lineHeight : noteSettings["lineHeight"] + "rem"
      }}
      >
        {content["id"] == 1 && (
          <div style={{ textAlign: "center", marginBottom: "10px" }}>
            <span>
              <h3
              >{title}</h3>
            </span>
            <span>
              <b>By {author}</b>
            </span>
          </div>
        )}
        <div style={{display : "flex", flexDirection : "column"}}>

        <div style={{border : "none", outline : "none",
         fontFamily : noteSettings["fontFamily"],
         fontSize : noteSettings["fontSize"] + "rem",
         color : noteSettings["textColor"], 
            userSelect: noteSettings["editable"] ? "text" : "none",
        }}
        onMouseUp={saveSelection}
        spellCheck="false"
        onInput={(e) => { handleNoteInput(e, content["id"])}}
        suppressContentEditableWarning={true}
        contentEditable={noteSettings["editable"]}
        >
         {content["note"]} 
        </div>

        {content["id"] !== 1 && (
        <span style={{ alignSelf : "flex-end", float : "right", background : "black", color : "white", padding : "0.5px 12px", borderRadius : "50%",
        }}>
        {content["id"]}
        </span>
        )}
        </div>
      </div>
    ))}
  </section>
    </>
 
  );
};

export default NotePage;
